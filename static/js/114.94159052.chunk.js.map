{"version":3,"file":"static/js/114.94159052.chunk.js","mappings":"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","sources":["pages/Profile/FollowList/FollowingList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { GoBackNav } from '../../../components/Common/TopNav';\nimport { FollowWrap } from './FollowListStyle';\nimport { useLocation } from 'react-router-dom';\nimport { UserAtom } from '../../../Store/userInfoAtoms';\nimport { useRecoilValue } from 'recoil';\nimport UserList from '../../../components/Common/UserList';\nimport axios from 'axios';\nimport { useInView } from 'react-intersection-observer';\n\nexport default function FollowingList() {\n  const location = useLocation();\n  const userInfo = useRecoilValue(UserAtom);\n  const isMyProfile = location.pathname === '/my_profile/following'; // Check if it's my profile\n  const userAccountname = isMyProfile ? userInfo.accountname : location.state;\n  const token = userInfo.token;\n  // const followingCount = userInfo.followerCount;\n\n  const [followingData, setFollowingData] = useState([]);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  const { ref, inView } = useInView(); // Hook to detect when an element comes into view\n\n  useEffect(() => {\n    fetchData();\n  }, [userAccountname, token]);\n\n  const fetchData = async () => {\n    try {\n      const newFollowingData = await FollowingData(\n        userAccountname,\n        token,\n        page\n      );\n      if (newFollowingData.length > 0) {\n        setFollowingData((prevData) => [...prevData, ...newFollowingData]);\n        setPage((prevPage) => prevPage + 1);\n      } else {\n        setHasMore(false);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    if (inView && hasMore) {\n      fetchData(); // Load more data when the ref element comes into view\n    }\n  }, [inView, hasMore]);\n\n  if (followingData === null) {\n    return null; // Rendering is still waiting\n  }\n  return (\n    <FollowWrap>\n      <GoBackNav />\n      <h1>Followings</h1>\n      <ul>\n        {followingData.map((user, index) => (\n          <React.Fragment key={user.id}>\n            <UserList user={user} type='follow' />\n            {index === followingData.length - 1 && (\n              <li ref={ref} style={{ visibility: 'hidden' }}></li>\n            )}\n          </React.Fragment>\n        ))}\n      </ul>\n    </FollowWrap>\n  );\n}\n\nasync function FollowingData(accountname, token, page = 1, pageSize = 7) {\n  const skip = (page - 1) * pageSize;\n  const url = `https://api.mandarin.weniv.co.kr/profile/${accountname}/following/?limit=${pageSize}&skip=${skip}`;\n\n  try {\n    const res = await axios.get(url, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        'Content-type': 'application/json',\n      },\n    });\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    return [];\n  }\n}\n"],"names":["FollowingList","location","useLocation","userInfo","useRecoilValue","UserAtom","userAccountname","pathname","accountname","state","token","_useState","useState","_useState2","_slicedToArray","followingData","setFollowingData","_useState3","_useState4","page","setPage","_useState5","_useState6","hasMore","setHasMore","_useInView","useInView","ref","inView","useEffect","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newFollowingData","wrap","_context","prev","next","FollowingData","sent","length","prevData","concat","_toConsumableArray","prevPage","t0","console","log","stop","apply","arguments","_jsxs","FollowWrap","children","_jsx","GoBackNav","map","user","index","React","UserList","type","style","visibility","id","_x","_x2","_FollowingData","_callee2","pageSize","skip","url","res","_args2","_context2","undefined","axios","get","headers","Authorization","abrupt","data"],"sourceRoot":""}