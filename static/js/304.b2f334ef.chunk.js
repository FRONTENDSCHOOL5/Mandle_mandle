"use strict";(self.webpackChunkmandle_mandle=self.webpackChunkmandle_mandle||[]).push([[304],{3304:function(t,e,n){n.r(e),n.d(e,{default:function(){return g}});var r=n(4165),a=n(3433),c=n(5861),s=n(9439),u=n(2791),o=n(7689),i=n(5330),l=n(5698),p=n(1243);function f(t,e,n,r){return h.apply(this,arguments)}function h(){return(h=(0,c.Z)((0,r.Z)().mark((function t(e,n,a,c){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.Z.put("https://api.mandarin.weniv.co.kr/post/".concat(e),{post:{content:a,image:c}},{headers:{Authorization:"Bearer ".concat(n),"Content-type":"application/json"}});case 3:return s=t.sent,t.abrupt("return",s.data);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var d=n(196),x=n(4695),v=n(754),Z=(n(6030),n(5995)),m=n(184);function g(){var t=(0,o.TH)().state||{},e=t.id,n=(0,u.useState)([]),p=(0,s.Z)(n,2),h=p[0],g=p[1],j=(0,u.useState)([]),k=(0,s.Z)(j,2),b=k[0],w=k[1],y=(0,u.useState)(""),C=(0,s.Z)(y,2),S=C[0],E=C[1],R=(0,u.useState)(!1),U=(0,s.Z)(R,2),L=U[0],I=U[1],T=(0,u.useState)(""),A=(0,s.Z)(T,2),H=A[0],_=A[1],q=(0,o.s0)(),z=(0,i.sJ)(l.Rx).token;(0,u.useEffect)((function(){(0,d.u)(z,_)}),[z]),(0,u.useEffect)((function(){t.image&&(g(t.image.split(",")),w(t.image.split(","))),t.content&&E(t.content)}),[t.image,t.content]);var B=(0,v.Z)(S,E),D=B.textarea,F=B.handleTextareaChange;(0,u.useEffect)((function(){S||h.length>0?I(!0):I(!1)}),[S,h]);var J=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(e){var n,c,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.target.files[0];case 2:return n=t.sent,t.prev=3,t.next=6,(0,x.u)(n);case 6:if(c=t.sent,g((function(t){return[].concat((0,a.Z)(t),[c])})),!([].concat((0,a.Z)(h),[c]).length>3)){t.next=12;break}return alert("\uc774\ubbf8\uc9c0\ub294 \ucd5c\ub300 3\uac1c\uae4c\uc9c0 \uc5c5\ub85c\ub4dc\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4."),t.abrupt("return");case 12:(s=new FileReader).onload=function(){w([].concat((0,a.Z)(b),[s.result]))},s.readAsDataURL(n),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),console.error(t.t0);case 20:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(e){return t.apply(this,arguments)}}(),K=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e,z,S,h.join(","));case 2:t.sent&&(E(""),g([]),q("/post/".concat(e),{state:e}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,m.jsxs)("div",{children:[(0,m.jsx)(Z.VL,{handleUploadPost:K,buttonStyle:L,post:t,currContent:S,currImg:h}),(0,m.jsxs)(Z.U0,{children:[(0,m.jsx)(Z.m1,{src:H,alt:"\uc720\uc800 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0"}),(0,m.jsx)(Z.KH,{handleImageChange:J})]}),(0,m.jsxs)(Z.Eb,{children:[(0,m.jsx)(Z.ai,{placeholder:"\uac8c\uc2dc\uae00 \uc785\ub825\ud558\uae30..",onChange:F,ref:D,value:S}),(0,m.jsx)(Z.hq,{children:h.map((function(t,e){return(0,m.jsxs)(Z.Iu,{children:[(0,m.jsx)(Z.eT,{src:"string"===typeof t?t:URL.createObjectURL(t),alt:"\uac8c\uc2dc\ubb3c \uc774\ubbf8\uc9c0 ".concat(e+1)}),(0,m.jsx)(Z.Eg,{onClick:function(){return function(t){var e=(0,a.Z)(h);e.splice(t,1),g(e)}(e)},type:"button"})]},e)}))})]})]})}}}]);
//# sourceMappingURL=304.b2f334ef.chunk.js.map