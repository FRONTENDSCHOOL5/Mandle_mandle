{"version":3,"file":"static/js/854.61a939f2.chunk.js","mappings":"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","sources":["pages/Profile/FollowList/FollowerList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { GoBackNav } from '../../../components/Common/TopNav';\nimport { FollowWrap } from './FollowListStyle';\nimport { useLocation } from 'react-router-dom';\nimport { UserAtom } from '../../../Store/userInfoAtoms';\nimport { useRecoilValue } from 'recoil';\nimport axios from 'axios';\nimport UserList from '../../../components/Common/UserList';\nimport { useInView } from 'react-intersection-observer';\n\nexport default function FollowerList() {\n  const location = useLocation();\n  const userInfo = useRecoilValue(UserAtom);\n  const isMyProfile = location.pathname === '/my_profile/follower';\n  const userAccountname = isMyProfile ? userInfo.accountname : location.state;\n  const token = userInfo.token;\n\n  const [followerData, setFollowerData] = useState([]);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  const { ref, inView } = useInView(); // Hook to detect when an element comes into view\n\n  useEffect(() => {\n    fetchData();\n  }, [userAccountname, token]);\n\n  const fetchData = async () => {\n    try {\n      const newFollowerData = await FollowerData(userAccountname, token, page);\n      if (newFollowerData.length > 0) {\n        setFollowerData((prevData) => [...prevData, ...newFollowerData]);\n        setPage((prevPage) => prevPage + 1);\n      } else {\n        setHasMore(false);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    if (inView && hasMore) {\n      fetchData(); // Load more data when the ref element comes into view\n    }\n  }, [inView, hasMore]);\n\n  if (followerData === null) {\n    return null;\n  }\n\n  return (\n    <FollowWrap>\n      <GoBackNav />\n      <h1>Followers</h1>\n      <ul>\n        {followerData.map((user, index) => (\n          <React.Fragment key={user.id}>\n            <UserList user={user} type='follow' />\n            {index === followerData.length - 1 && (\n              <li ref={ref} style={{ visibility: 'hidden' }}></li>\n            )}\n          </React.Fragment>\n        ))}\n      </ul>\n    </FollowWrap>\n  );\n}\n\nasync function FollowerData(accountname, token, page = 1, pageSize = 7) {\n  const skip = (page - 1) * pageSize;\n  const url = `https://api.mandarin.weniv.co.kr/profile/${accountname}/follower/?limit=${pageSize}&skip=${skip}`;\n\n  try {\n    const res = await axios.get(url, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        'Content-type': 'application/json',\n      },\n    });\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    return [];\n  }\n}\n"],"names":["FollowerList","location","useLocation","userInfo","useRecoilValue","UserAtom","userAccountname","pathname","accountname","state","token","_useState","useState","_useState2","_slicedToArray","followerData","setFollowerData","_useState3","_useState4","page","setPage","_useState5","_useState6","hasMore","setHasMore","_useInView","useInView","ref","inView","useEffect","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newFollowerData","wrap","_context","prev","next","FollowerData","sent","length","prevData","concat","_toConsumableArray","prevPage","t0","console","log","stop","apply","arguments","_jsxs","FollowWrap","children","_jsx","GoBackNav","map","user","index","React","UserList","type","style","visibility","id","_x","_x2","_FollowerData","_callee2","pageSize","skip","url","res","_args2","_context2","undefined","axios","get","headers","Authorization","abrupt","data"],"sourceRoot":""}